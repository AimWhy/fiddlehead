import{useState as e,useEffect as n,useCallback as t,useTreeId as r}from"fiddlehead";var i=function(e){if(e!==Object(e))throw new TypeError("The store data must be a reference type.");var n=new Set;return{get data(){return e},setData:function(t){t(e),n.forEach((function(n){n(e)}))},subscribe:n.add.bind(n),unsubscribe:n.delete.bind(n)}},a=function(t,r,i){var a=e(r(t.data));return n((function(){var e=function(e){void 0===i?a[1](r(e)):a[1]((function(n){var t=r(e);return i(n,t)?n:t}))};return t.subscribe(e),function(){t.unsubscribe(e)}}),[t]),a[0]},o=function(e,n){return t((function(t){e.setData((function(e){n(t,e)}))}),[e])},u=new WeakMap,c=function(e,n){if(e!==Object(e))throw new TypeError("The store scope must be a reference type.");var t=r(),a=u.get(t);void 0===a&&(a=new WeakMap,u.set(t,a)),a.has(e)?console.warn("The store already has been initialized."):a.set(e,i(n))},f=function(e){var n,t=r(),i=u.get(t);if(void 0!==i&&(n=i.get(e)),void 0===n)throw new ReferenceError("Attempting to access an uninitialized store.");return n},s=function(e,n,t){var r=f(e);return a(r,n,t)},d=function(e,n){var t=f(e);return o(t,n)};export{i as createStore,a as useGlobalStoreRead,o as useGlobalStoreWrite,c as useStoreInit,s as useStoreRead,d as useStoreWrite};
