Object.defineProperty(exports,"__esModule",{value:!0});var n=require("fiddlehead"),e=function(n){if(null==n||n.constructor!==Object)throw new TypeError("The store's data must be a plain object.");var e=n,r=new Set;return{get data(){return e},setData:function(n){n(e),r.forEach((function(n){n(e)}))},subscribe:r.add.bind(r),unsubscribe:r.delete.bind(r)}},r=function(e,r,t){var o=n.useState(r(e.data));return n.useEffect((function(){var n=function(n){void 0===t?o[1](r(n)):o[1]((function(e){var o=r(n);return t(e,o)?e:o}))};return e.subscribe(n),function(){e.unsubscribe(n)}}),[e,r,t]),o[0]},t=function(n,e){return function(r){n.setData((function(n){e(n,r)}))}},o=new WeakMap,u=function(e){var r,t=n.useTreeId(),u=o.get(t);if(void 0!==u&&(r=u.get(e)),void 0===r)throw new ReferenceError("Cannot access a store before initialization.");return r};exports.createStore=e,exports.useGlobalStoreRead=r,exports.useGlobalStoreWrite=t,exports.useStoreInit=function(r,t){var u=n.useTreeId(),i=o.get(u);void 0===i&&(i=new WeakMap,o.set(u,i)),i.has(r)||i.set(r,e(t))},exports.useStoreRead=function(n,e,t){var o=u(n);return r(o,e,t)},exports.useStoreWrite=function(n,e){var r=u(n);return t(r,e)};
