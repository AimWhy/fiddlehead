Object.defineProperty(exports,"__esModule",{value:!0});var n=require("fiddlehead"),r=function(n){if(null==n||n.constructor!==Object)throw new TypeError("The store's data must be a plain object.");var r=n,e=new Set;return{get data(){return r},setData:function(n){n(r),e.forEach((function(n){n(r)}))},subscribe:e.add.bind(e),unsubscribe:e.delete.bind(e)}},e=function(r,e,t){var o=n.useState(e(r.data));return n.useEffect((function(){var n=function(n){void 0===t?o[1](e(n)):o[1]((function(r){var o=e(n);return t(r,o)?r:o}))};return r.subscribe(n),function(){r.unsubscribe(n)}}),[r,e,t]),o[0]},t=function(n,r){return function(e){n.setData((function(n){r(n,e)}))}},o=new WeakMap,u=function(r){var e,t=n.useTreeId(),u=o.get(t);if(void 0!==u&&(e=u.get(r)),void 0===e)throw new ReferenceError("Cannot access a store before initialization.");return e};exports.createStore=r,exports.useGlobalStoreRead=e,exports.useGlobalStoreWrite=t,exports.useStoreInit=function(e,t){var u=n.useTreeId(),i=o.get(u);void 0===i&&(i=new WeakMap,o.set(u,i)),i.has(e)||i.set(e,r(t))},exports.useStoreRead=function(n,r,t){var o=u(n);return e(o,r,t)},exports.useStoreWrite=function(n,r){var e=u(n);return t(e,r)};
