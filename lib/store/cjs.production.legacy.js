Object.defineProperty(exports,"__esModule",{value:!0});var n=require("hook"),r=function(n){if(null==n||n.constructor!==Object)throw new Error("Store data must be a plain object");var r=n,t=new Set;return{get data(){return r},setData:function(n){n(r),t.forEach((function(n){n(r)}))},subscribe:t.add.bind(t),unsubscribe:t.delete.bind(t)}},t=function(r,t,e){var o=n.useState(t(r.data));return n.useEffect((function(){var n=function(n){void 0===e?o[1](t(n)):o[1]((function(r){var o=t(n);return e(r,o)?r:o}))};return r.subscribe(n),function(){r.unsubscribe(n)}}),[r,t,e]),o[0]},e=function(n,r){return function(t){n.setData((function(n){r(n,t)}))}},o=new WeakMap,u=function(){var r=n.resolveRootVNode(),t=o.get(r);if(void 0===t)throw new Error("Store has not been applied");return t};exports.applyStore=function(t){var e=n.resolveRootVNode();o.has(e)||o.set(e,r(t))},exports.createStore=r,exports.useGlobalReadableStore=t,exports.useGlobalWritableStore=e,exports.useReadableStore=function(n,r){var e=u();return t(e,n,r)},exports.useWritableStore=function(n){var r=u();return e(r,n)};
