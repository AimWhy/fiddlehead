Object.defineProperty(exports,"__esModule",{value:!0});var e=require("fiddlehead"),r=function(e){if(e!==Object(e))throw new TypeError("The store data must be a reference type.");var r=new Set;return{get data(){return e},setData:function(t){t(e),r.forEach((function(r){r(e)}))},subscribe:r.add.bind(r),unsubscribe:r.delete.bind(r)}},t=function(r,t,n){var o=e.useState(t(r.data));return e.useEffect((function(){var e=function(e){void 0===n?o[1](t(e)):o[1]((function(r){var o=t(e);return n(r,o)?r:o}))};return r.subscribe(e),function(){r.unsubscribe(e)}}),[r]),o[0]},n=function(r,t){return e.useCallback((function(e){r.setData((function(r){t(e,r)}))}),[r])},o=new WeakMap,u=function(r){var t,n=e.useTreeId(),u=o.get(n);if(void 0!==u&&(t=u.get(r)),void 0===t)throw new ReferenceError("Attempting to access an uninitialized store.");return t};exports.createStore=r,exports.useGlobalStoreRead=t,exports.useGlobalStoreWrite=n,exports.useStoreInit=function(t,n){if(t!==Object(t))throw new TypeError("The store scope must be a reference type.");var u=e.useTreeId(),i=o.get(u);void 0===i&&(i=new WeakMap,o.set(u,i)),i.has(t)||i.set(t,r(n))},exports.useStoreRead=function(e,r,n){var o=u(e);return t(o,r,n)},exports.useStoreWrite=function(e,r){var t=u(e);return n(t,r)};
