import{useState as n,useEffect as r,resolveRootVNode as t}from"hook";var o=function(n){if(null==n||n.constructor!==Object)throw new Error("Store data must be a plain object");var r=n,t=new Set;return{get data(){return r},setData:function(n){n(r),t.forEach((function(n){n(r)}))},subscribe:t.add.bind(t),unsubscribe:t.delete.bind(t)}},u=function(t,o,u){var e=n(o(t.data));return r((function(){var n=function(n){void 0===u?e[1](o(n)):e[1]((function(r){var t=o(n);return u(r,t)?r:t}))};return t.subscribe(n),function(){t.unsubscribe(n)}}),[t,o,u]),e[0]},e=function(n,r){return function(t){n.setData((function(n){r(n,t)}))}},i=new WeakMap,a=function(n){var r=t();i.has(r)||i.set(r,o(n))},c=function(){var n=t(),r=i.get(n);if(void 0===r)throw new Error("Store has not been applied");return r},f=function(n,r){var t=c();return u(t,n,r)},v=function(n){var r=c();return e(r,n)};export{a as applyStore,o as createStore,u as useGlobalReadableStore,e as useGlobalWritableStore,f as useReadableStore,v as useWritableStore};
