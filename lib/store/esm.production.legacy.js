import{useState as n,useEffect as r,resolveRootVNode as t}from"hook";var o=function(n){if(null==n||n.constructor!==Object)throw new Error("Store data must be a plain object");var r=n,t=new Set;return{get data(){return r},setData:function(n){n(r),t.forEach((function(n){n(r)}))},subscribe:t.add.bind(t),unsubscribe:t.delete.bind(t)}},e=function(t,o,e){var i=n(o(t.data));return r((function(){var n=function(n){void 0===e?i[1](o(n)):i[1]((function(r){var t=o(n);return e(r,t)?r:t}))};return t.subscribe(n),function(){t.unsubscribe(n)}}),[t,o,e]),i[0]},i=function(n,r){return function(t){n.setData((function(n){r(n,t)}))}},u=new WeakMap,a=function(n,r){var e=t(),i=u.get(e);void 0===i&&(i=new WeakMap,u.set(e,i)),i.has(n)||i.set(n,o(r))},c=function(n){var r,o=t(),e=u.get(o);if(void 0!==e&&(r=e.get(n)),void 0===r)throw new Error("Store has not been initialized");return r},f=function(n,r,t){var o=c(n);return e(o,r,t)},v=function(n,r){var t=c(n);return i(t,r)};export{o as createStore,e as useGlobalStoreRead,i as useGlobalStoreWrite,a as useStoreInit,f as useStoreRead,v as useStoreWrite};
