import{useState as e,useEffect as n,useTreeId as r}from"fiddlehead";var t=function(e){if(e!==Object(e))throw new TypeError("The store data must be a reference type.");var n=new Set;return{get data(){return e},setData:function(r){r(e),n.forEach((function(n){n(e)}))},subscribe:n.add.bind(n),unsubscribe:n.delete.bind(n)}},o=function(r,t,o){var i=e(t(r.data));return n((function(){var e=function(e){void 0===o?i[1](t(e)):i[1]((function(n){var r=t(e);return o(n,r)?n:r}))};return r.subscribe(e),function(){r.unsubscribe(e)}}),[r,t,o]),i[0]},i=function(e,n){return function(r){e.setData((function(e){n(e,r)}))}},u=new WeakMap,a=function(e,n){if(e!==Object(e))throw new TypeError("The store scope must be a reference type.");var o=r(),i=u.get(o);void 0===i&&(i=new WeakMap,u.set(o,i)),i.has(e)||i.set(e,t(n))},c=function(e){var n,t=r(),o=u.get(t);if(void 0!==o&&(n=o.get(e)),void 0===n)throw new ReferenceError("Attempting to access an uninitialized store.");return n},f=function(e,n,r){var t=c(e);return o(t,n,r)},s=function(e,n){var r=c(e);return i(r,n)};export{t as createStore,o as useGlobalStoreRead,i as useGlobalStoreWrite,a as useStoreInit,f as useStoreRead,s as useStoreWrite};
