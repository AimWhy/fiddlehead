import{useState as n,useEffect as r,useTreeId as t}from"hook";var e=function(n){if(null==n||n.constructor!==Object)throw new TypeError("The store's data must be a plain object.");var r=n,t=new Set;return{get data(){return r},setData:function(n){n(r),t.forEach((function(n){n(r)}))},subscribe:t.add.bind(t),unsubscribe:t.delete.bind(t)}},o=function(t,e,o){var i=n(e(t.data));return r((function(){var n=function(n){void 0===o?i[1](e(n)):i[1]((function(r){var t=e(n);return o(r,t)?r:t}))};return t.subscribe(n),function(){t.unsubscribe(n)}}),[t,e,o]),i[0]},i=function(n,r){return function(t){n.setData((function(n){r(n,t)}))}},u=new WeakMap,a=function(n,r){var o=t(),i=u.get(o);void 0===i&&(i=new WeakMap,u.set(o,i)),i.has(n)||i.set(n,e(r))},c=function(n){var r,e=t(),o=u.get(e);if(void 0!==o&&(r=o.get(n)),void 0===r)throw new ReferenceError("Cannot access a store before initialization.");return r},f=function(n,r,t){var e=c(n);return o(e,r,t)},v=function(n,r){var t=c(n);return i(t,r)};export{e as createStore,o as useGlobalStoreRead,i as useGlobalStoreWrite,a as useStoreInit,f as useStoreRead,v as useStoreWrite};
