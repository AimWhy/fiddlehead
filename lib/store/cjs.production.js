Object.defineProperty(exports,"__esModule",{value:!0});var e=require("fiddlehead");let t=e=>{if(null==e||e.constructor!==Object)throw new TypeError("The store's data must be a plain object.");let t=e,r=new Set;return{get data(){return t},setData(e){e(t),r.forEach((e=>{e(t)}))},subscribe:r.add.bind(r),unsubscribe:r.delete.bind(r)}},r=(t,r,o)=>{let n=e.useState(r(t.data));return e.useEffect((()=>{let e=e=>{void 0===o?n[1](r(e)):n[1]((t=>{let n=r(e);return o(t,n)?t:n}))};return t.subscribe(e),()=>{t.unsubscribe(e)}}),[t,r,o]),n[0]},o=(e,t)=>r=>{e.setData((e=>{t(e,r)}))},n=new WeakMap,a=t=>{let r,o=e.useTreeId(),a=n.get(o);if(void 0!==a&&(r=a.get(t)),void 0===r)throw new ReferenceError("Cannot access a store before initialization.");return r};exports.createStore=t,exports.useGlobalStoreRead=r,exports.useGlobalStoreWrite=o,exports.useStoreInit=(r,o)=>{let a=e.useTreeId(),s=n.get(a);void 0===s&&(s=new WeakMap,n.set(a,s)),s.has(r)||s.set(r,t(o))},exports.useStoreRead=(e,t,o)=>{let n=a(e);return r(n,t,o)},exports.useStoreWrite=(e,t)=>{let r=a(e);return o(r,t)};
