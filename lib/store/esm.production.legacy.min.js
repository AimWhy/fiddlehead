import{useState as e,useLayoutEffect as n,useCallback as r,useTreeId as t}from"fiddlehead";var o=function(e){if(e!==Object(e))throw new TypeError("The store data must be a reference type.");var n=new Set;return{get data(){return e},setData:function(r){r(e),n.forEach((function(n){n(e)}))},subscribe:n.add.bind(n),unsubscribe:n.delete.bind(n)}},i=function(r,t,o){var i=e(t(r.data));return n((function(){var e=function(e){void 0===o?i[1](t(e)):i[1]((function(n){var r=t(e);return o(n,r)?n:r}))};return r.subscribe(e),function(){r.unsubscribe(e)}}),[r]),i[0]},u=function(e,n){return r((function(r){e.setData((function(e){n(r,e)}))}),[e])},a=new WeakMap,c=function(e,n){if(e!==Object(e))throw new TypeError("The store scope must be a reference type.");var r=t(),i=a.get(r);void 0===i&&(i=new WeakMap,a.set(r,i)),i.has(e)||i.set(e,o(n))},f=function(e){var n,r=t(),o=a.get(r);if(void 0!==o&&(n=o.get(e)),void 0===n)throw new ReferenceError("Attempting to access an uninitialized store.");return n},s=function(e,n,r){var t=f(e);return i(t,n,r)},v=function(e,n){var r=f(e);return u(r,n)};export{o as createStore,i as useGlobalStoreRead,u as useGlobalStoreWrite,c as useStoreInit,s as useStoreRead,v as useStoreWrite};
