Object.defineProperty(exports,"__esModule",{value:!0});var e=require("fiddlehead"),t=function(e){if(e!==Object(e))throw new TypeError("The store data must be a reference type.");var t=new Set;return{get data(){return e},setData:function(r){r(e),t.forEach((function(t){t(e)}))},subscribe:t.add.bind(t),unsubscribe:t.delete.bind(t)}},r=function(t,r,n){var o=e.useState(r(t.data));return e.useEffect((function(){var e=function(e){void 0===n?o[1](r(e)):o[1]((function(t){var o=r(e);return n(t,o)?t:o}))};return t.subscribe(e),function(){t.unsubscribe(e)}}),[t]),o[0]},n=function(t,r){return e.useCallback((function(e){t.setData((function(t){r(e,t)}))}),[t])},o=new WeakMap,a=function(t){var r,n=e.useTreeId(),a=o.get(n);if(void 0!==a&&(r=a.get(t)),void 0===r)throw new ReferenceError("Attempting to access an uninitialized store.");return r};exports.createStore=t,exports.useGlobalStoreRead=r,exports.useGlobalStoreWrite=n,exports.useStoreInit=function(r,n){if(r!==Object(r))throw new TypeError("The store scope must be a reference type.");var a=e.useTreeId(),u=o.get(a);void 0===u&&(u=new WeakMap,o.set(a,u)),u.has(r)?console.warn("The store already has been initialized."):u.set(r,t(n))},exports.useStoreRead=function(e,t,n){var o=a(e);return r(o,t,n)},exports.useStoreWrite=function(e,t){var r=a(e);return n(r,t)};
