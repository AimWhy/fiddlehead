import{useState as n,useEffect as t}from"hook";function o(n){if(null===n||"object"!=typeof n)throw new Error("Store data must be an object");const t=n,o=new Set;return{get data(){return t},setData(n){n(t),o.forEach((function(n){n(t)}))},subscribe:o.add.bind(o),unsubscribe:o.delete.bind(o)}}function r(o,r,u){const[e,c]=n(r(o.data));return t((function(){const n=function(n){c(void 0===u?r(n):function(t){const o=r(n);return u(t,o)?t:o})};return o.subscribe(n),function(){o.unsubscribe(n)}}),[o,r,u]),e}function u(n,t){return function(o){n.setData((function(n){t(n,o)}))}}export{o as createStore,r as useReadableStore,u as useWritableStore};
