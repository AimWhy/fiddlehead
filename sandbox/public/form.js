(()=>{"use strict";function t(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function n(t){return"string"==typeof t||t instanceof String}function r(t){return"number"==typeof t||t instanceof Number}function e(t){return t instanceof Function}function o(t){return t instanceof Array}function l(t){return null==t}var u=null,a=-1;function i(){if(null===u)throw new Error("Cannot call hooks from outside of the component");return[u,++a]}function c(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function f(t){this.current=t}function s(t){var n,r,e=(n=i(),r=2,function(t){if(Array.isArray(t))return t}(n)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var e,o,l=[],u=!0,a=!1;try{for(r=r.call(t);!(u=(e=r.next()).done)&&(l.push(e.value),!n||l.length!==n);u=!0);}catch(t){a=!0,o=t}finally{try{u||null==r.return||r.return()}finally{if(a)throw o}}return l}}(n,r)||function(t,n){if(t){if("string"==typeof t)return c(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=e[0],l=e[1];if(o.hooks.length>l)return o.hooks[l];var u=new f(t);return o.hooks.push(u),u}function v(t,n,r,e){this.type=t,this.props=n,this.key=r,this.ref=e,this.hooks=[],this.parent=null,this.children=[],this.path=[],this.pathFromParent=[],this.viewNode=null,this.ns=null}var h="#txt",y="#frg",p="html",d="svg";function m(t,n){t.viewNode=n,t.ref instanceof f&&(t.ref.current=n)}var g=0;function b(){return[--g]}function w(t){return t.join("/")}var A=Object.create(null);function k(n){var r=w(n);return t(A,r)?A[r]:null}function O(t,n){A[w(t)]=n}function S(t){delete A[w(t)]}function j(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var e,o,l=[],u=!0,a=!1;try{for(r=r.call(t);!(u=(e=r.next()).done)&&(l.push(e.value),!n||l.length!==n);u=!0);}catch(t){a=!0,o=t}finally{try{u||null==r.return||r.return()}finally{if(a)throw o}}return l}}(t,n)||function(t,n){if(t){if("string"==typeof t)return x(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function N(n,r,e){for(var o in e)t(e,o)&&l(r[o])&&I(n,o,e[o]);for(var u in r)t(r,u)&&C(n,u,r[u],e[u])}function I(t,n,r){var e=j(T(n,r),2),o=e[0];l(e[1])||t.removeAttribute(o)}function C(e,o,u,a){var i=j(T(o,u),2),c=i[0],f=i[1];if(!l(f))if("style"!==c){if((n(f)||r(f))&&e.setAttribute(c,f),c in e)try{e[c]=f}catch(t){}}else{if(!l(a)){var s=j(T(o,a),2)[1];if(!l(s))for(var v in s)t(s,v)&&!t(f,v)&&(e.style[v]="")}for(var h in f)t(f,h)&&(l(f[h])||(e.style[h]=f[h]))}}function T(t,r){return e(r)?[t.toLowerCase(),r]:"className"===t?o(r)?["class",r.filter((function(t){return n(t)})).join(" ")]:["class",r]:"class"===t?(console.error("className instead of class"),[t]):"style"!==t||l(r)||function(t){return!!t&&t.constructor===Object}(r)?[t,r]:(console.error("style must be a plain object",r),[t])}var P=0,E=0;function $(t){return function(t){if(Array.isArray(t))return D(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return D(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function U(n){var r=$(n.path);!function o(l){var u,a,i=r.length;l!==n&&(r.push.apply(r,$(l.pathFromParent)),null!==l.key&&(r[r.length-1]=(a=l.key,"@"+encodeURIComponent(a))),e(l.type)?r.push((t(u=l.type,"Hook$ComponentType")||(u.Hook$ComponentType=u.name+"$"+ ++E),u.Hook$ComponentType)):r.push(l.type));for(var c=0;c<l.children.length;c++)o(l.children[c]);l.path=$(r),void 0!==l.resolvePath&&(l.resolvePath(),delete l.resolvePath),r.length=i}(n)}function M(t){"svg"===t.type?t.ns=d:null!==t.parent?t.ns=t.parent.ns:t.ns=p;var r,e,o,l,u,a=null;if(t.type===h)u=t.text,a=document.createTextNode(u);else if(t.type===y);else if(n(t.type)){var i=null;t.ns===d&&(i="http://www.w3.org/2000/svg"),r=i,e=t.type,o=t.props,N(l=null!==r?document.createElementNS(r,e):document.createElement(e),o,{}),function(t,n){t.Hook$VirtualNode=n}(a=l,t)}m(t,a);for(var c=0;c<t.children.length;c++)M(t.children[c])}function H(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,e)}return r}function F(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?H(Object(r),!0).forEach((function(n){V(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}function V(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function B(t,n){for(var r=n&&W(n)[0]||null,e=0;e<t.length;e++){var o=t[e];if(null!==o.viewNode){var l=R(o);null!==l&&(null!==r&&l===r.parentNode?l.insertBefore(o.viewNode,r):l.appendChild(o.viewNode))}}}function L(t){for(var n=W(t),r=0;r<n.length;r++){var e=n[r];null!==e.parentNode&&e.parentNode.removeChild(e)}}function R(t){return null===t.parent?(console.log(t),null):null===t.parent.viewNode?R(t.parent):t.parent.viewNode}function W(t){return null!==t.viewNode?[t.viewNode]:t.children.reduce((function(t,n){return t.concat(W(n))}),[])}function Y(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var e,o,l=[],u=!0,a=!1;try{for(r=r.call(t);!(u=(e=r.next()).done)&&(l.push(e.value),!n||l.length!==n);u=!0);}catch(t){a=!0,o=t}finally{try{u||null==r.return||r.return()}finally{if(a)throw o}}return l}}(t,n)||function(t,n){if(t){if("string"==typeof t)return z(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function G(t,n,r){this.tag=q,this.callback=t,this.deps=n,this.destroy=null,this.lastDestroy=r}var q=0;function J(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=i(),e=Y(r,2),o=e[0],l=e[1];if(o.hooks.length>l){var u=o.hooks[l];if((null!==n||null!==u.deps)&&n.length!==u.deps.length)throw new Error("Deps must be size-fixed");var a=X(n,u.deps);if(2===a)return;if(3===a)return void(u.tag=a);if(1===a||4===a){var c=new G(t,n,u.destroy);return c.tag=a,void(o.hooks[l]=c)}}else{var f=new G(t,n,null);f.tag=X(n),o.hooks.push(f)}}function K(t,n){for(var r=0;r<t.hooks.length;r++){var e=t.hooks[r];e instanceof G&&(n||1===e.tag||4===e.tag)&&((o=e).destroy=o.callback())}var o}function Q(t,n){for(var r=0;r<t.hooks.length;r++){var e=t.hooks[r];e instanceof G&&(null!==e.lastDestroy||null!==e.destroy)&&(n||1===e.tag||4===e.tag)&&_(e,n)}}function X(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null===t?1:0===t.length?2:!1===n||Z(t,n)?3:4}function Z(t,n){for(var r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}function _(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===t.lastDestroy||n?null!==t.destroy&&t.destroy():t.lastDestroy()}function tt(n,r){var o=r?{}:rt(n);nt(n);var l=rt(n);!function(n,r){for(var o in n)if(t(n,o)){var l=!t(r,o),u=n[o];e(u.type)&&(Q(u,l),l&&S(u.path))}}(o,l),M(n),function(n,r){!function(n,r){var e="";for(var o in n)if(t(n,o)&&!t(r,o)&&!o.startsWith(e+"/")){var l=n[o];null!==l.viewNode&&(L(l),e=o)}}(n,r),function(n,r){for(var e=Object.keys(F(F({},n),r)),o=0;o<e.length;o++){var l=e[o];if(t(n,l)&&t(r,l)){var u=r[l];if(null!==u.viewNode){var a=n[l];m(u,a.viewNode),u.type===h?u.text!==a.text&&(u.viewNode.textContent=u.text):N(u.viewNode,u.props,a.props)}}}}(n,r),function(n,r){var e=[];for(var o in r)if(t(r,o))if(t(n,o))B(e,n[o]),e.length=0;else{var l=r[o];null!==l.viewNode&&e.push(l)}e.length>0&&B(e,null)}(n,r)}(o,l),function(n,r){for(var o in r)if(t(r,o)){var l=!t(n,o),u=r[o];e(u.type)&&K(u,l)}}(o,l)}function nt(t){if(t.type!==h)if(e(t.type)){u=t,a=-1;var n=t.type(t.props);u=null,a=-1,t.children[0]=n,n.parent=t,n.pathFromParent=[0],U(t),nt(n)}else for(var r=0;r<t.children.length;r++)nt(t.children[r])}function rt(t){var n=Object.create(null);return function t(r){n[w(r.path)]=r;for(var e=0;e<r.children.length;e++)t(r.children[e])}(t),n}function et(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function ot(t,n,r){this.value=t,this.setValue=n,this.virtualNode=r}function lt(t){var n,r,o=(n=i(),r=2,function(t){if(Array.isArray(t))return t}(n)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var e,o,l=[],u=!0,a=!1;try{for(r=r.call(t);!(u=(e=r.next()).done)&&(l.push(e.value),!n||l.length!==n);u=!0);}catch(t){a=!0,o=t}finally{try{u||null==r.return||r.return()}finally{if(a)throw o}}return l}}(n,r)||function(t,n){if(t){if("string"==typeof t)return et(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?et(t,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=o[0],u=o[1];if(l.hooks.length>u){var a=l.hooks[u];return[a.value,a.setValue]}var c=new ot(t,(function(t){var n;(n=e(t)?t(c.value):t)!==c.value&&(c.value=n,tt(c.virtualNode,!1))}),l);return l.hooks.push(c),[c.value,c.setValue]}var ut,at,it,ct,ft=["key","ref"],st=["key","ref"];function vt(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function ht(t,n){if(null==t)return{};var r,e,o=function(t,n){if(null==t)return{};var r,e,o={},l=Object.keys(t);for(e=0;e<l.length;e++)r=l[e],n.indexOf(r)>=0||(o[r]=t[r]);return o}(t,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(e=0;e<l.length;e++)r=l[e],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function yt(t,n){n=n||{};for(var r=arguments.length,o=new Array(r>2?r-2:0),l=2;l<r;l++)o[l-2]=arguments[l];return null===t?dt.apply(void 0,[y,n].concat(o)):e(t)?pt.apply(void 0,[t,n].concat(o)):dt.apply(void 0,[t,n].concat(o))}function pt(t,n){for(var r=n.key,e=void 0===r?null:r,o=n.ref,l=void 0===o?null:o,u=ht(n,ft),a=arguments.length,i=new Array(a>2?a-2:0),c=2;c<a;c++)i[c-2]=arguments[c];u.children=i;var f=b(),s=new v(t,u,e,l);return O(f,s.hooks),s.resolvePath=function(){S(f);var t=k(s.path);if(null!==t){s.hooks=t;for(var n=0;n<s.hooks.length;n++){var r=s.hooks[n];r instanceof ot&&(r.virtualNode=s)}}O(s.path,s.hooks)},s}function dt(t,n){for(var r=n.key,e=void 0===r?null:r,o=n.ref,l=void 0===o?null:o,u=ht(n,st),a=new v(t,u,e,l),i=arguments.length,c=new Array(i>2?i-2:0),f=2;f<i;f++)c[f-2]=arguments[f];return mt(a,c,[]),a}function mt(t,e,l){if(o(e))for(var u=0;u<e.length;u++)mt(t,e[u],[].concat(function(t){if(Array.isArray(t))return vt(t)}(a=l)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(a)||function(t,n){if(t){if("string"==typeof t)return vt(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vt(t,n):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[u]));else!function(t,e,o){var l;n(e)||r(e)?(l=new v(h,{},null,null)).text=String(e):l=e,l instanceof v&&(t.children.push(l),l.parent=t,l.pathFromParent=o)}(t,e,l);var a}function gt(t,n){return Ot(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var e,o,l=[],u=!0,a=!1;try{for(r=r.call(t);!(u=(e=r.next()).done)&&(l.push(e.value),!n||l.length!==n);u=!0);}catch(t){a=!0,o=t}finally{try{u||null==r.return||r.return()}finally{if(a)throw o}}return l}}(t,n)||At(t,n)||wt()}function bt(t){return Ot(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||At(t)||wt()}function wt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function At(t,n){if(t){if("string"==typeof t)return kt(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kt(t,n):void 0}}function kt(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function Ot(t){if(Array.isArray(t))return t}function St(t){var n=t.text,r=t.setText;return bt(lt(1)),J((function(){return function(){}}),[]),J((function(){return function(){}}),[n]),yt("div",{className:"Cat"},yt(It,null,yt("span",null,"Ad name: "),yt("input",{type:"text",value:n,onInput:function(t){return r(t.target.value)}})))}function jt(t){var n=t.text,r=t.setText,e=gt(lt("gruuu"),2),o=e[0],l=e[1];return J((function(){return function(){}}),[]),J((function(){return function(){}}),[n]),yt("div",{className:"Dog"},yt(It,null,yt("span",null,"Ad name: "),yt("input",{type:"text",value:n,onchange:function(t){return r(t.target.value)}})),yt("br",null),yt(It,null,"Speak:"," ",yt("input",{value:o,onchange:function(t){return l(t.target.value)}})))}function xt(t){var n=t.layout,r=t.text,e=t.setText;return bt(lt()),J((function(){return function(){}}),[]),yt("div",{className:"Bird"},"dog"===n&&yt(jt,{text:r,setText:e}),"cat"===n&&yt(St,{text:r,setText:e}))}function Nt(t){var n=t.count,r=t.setCount,e=gt(lt("cat"),2),o=e[0],l=e[1],u=gt(lt("unnamed"),2),a=u[0],i=u[1],c=s(null);return J((function(){return function(){}}),[]),J((function(){return function(){}})),J((function(){return function(){}}),[o,a]),yt("form",{className:"YourAd",style:{padding:"16px",border:"1px solid #ccc"}},yt("div",null,yt("span",null,"Your Ad: ",a)),yt("br",null),yt("div",null,yt("select",{ref:c,onchange:function(t){return l(t.target.value)}},yt("option",{value:"cat",selected:"cat"===o},"Layout Cat"),yt("option",{value:"dog",selected:"dog"===o},"Layout Dog"))),yt("br",null),yt(It,null,"cat"===o&&yt(It,{key:"#hehe/hahaha mm"},yt("br",null),yt("div",null,"This is cat layout."),yt(St,{text:a,setText:i})),"dog"===o&&yt(It,null,yt("div",null,"This is not default layout, update from ancestor might reset the state of this part if tree updating logic not correct."),yt("br",null),yt(jt,{text:a,setText:i}))),yt("br",null),yt(It,null,yt("div",null,yt("strong",null,yt("i",null,"This is Bird container"))),yt("br",null),yt(xt,{layout:o,text:a,setText:i})),yt("br",null),yt("div",null,yt("button",{type:"button",onclick:function(){r((function(t){return t+1}))}},"Update count")," ",yt("span",null,"Re-renders:",n)))}function It(t){return yt("div",{className:"Wrapper"},t.children)}function Ct(){var t=gt(lt(1),2),n=t[0],r=t[1],e=s(null);return J((function(){return function(){}})),yt("article",{className:"MyAd"},[!1,1,2,[4,5]," Count: ",n],yt(It,null,yt("inner",null,yt("my-div",null,yt("love-div",null,yt("test-div",null,yt("a",null,"link"),yt(It,null,yt(It,null,yt(It,null,"test",yt(It,null,yt(Nt,{ref:e,count:n,setCount:r}))))))),yt("b",null,yt("i",null,"hehe"))))))}function Tt(){var t=gt(lt(!0),2),n=t[0],r=t[1];return yt(null,null,yt("paragraph",null,yt("input",{type:"checkbox",checked:n,onchange:function(t){return r((function(t){return!t}))}}),yt("h2",null,"Demo"),"hello",n&&yt(Ct,null)))}function Pt(){return yt(Tt,null)}ut=yt((function(){return yt("hh-ff",null,yt(Pt,null))}),null),m(ct=new v((at=document.getElementById("sandbox-container")).nodeName.toLowerCase(),{},null,null),at),at.ownerSVGElement?ct.ns=d:ct.ns=p,ct.path=[(it=at,t(it,"Hook$ContainerId")||(it.Hook$ContainerId="~"+ ++P),it.Hook$ContainerId)],ct.children[0]=ut,ut.parent=ct,ut.pathFromParent=[0],U(ct),tt(ut,!0)})();