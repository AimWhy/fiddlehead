(()=>{"use strict";var n=null,t=-1;function r(){if(null===n)throw new Error("Cannot call hooks from outside of the component");return[n,++t]}function e(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function o(n){this.current=n}function l(n){var t,l,u=(t=r(),l=2,function(n){if(Array.isArray(n))return n}(t)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var e,o,l=[],u=!0,i=!1;try{for(r=r.call(n);!(u=(e=r.next()).done)&&(l.push(e.value),!t||l.length!==t);u=!0);}catch(n){i=!0,o=n}finally{try{u||null==r.return||r.return()}finally{if(i)throw o}}return l}}(t,l)||function(n,t){if(n){if("string"==typeof n)return e(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(n,t):void 0}}(t,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=u[0],a=u[1];if(i.hooks_.length>a)return i.hooks_[a];var c=new o(n);return i.hooks_.push(c),c}function u(n){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},u(n)}function i(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function a(n){return"string"==typeof n||n instanceof String}function c(n){return"number"==typeof n||n instanceof Number}function f(n){return n instanceof Function}function s(n){return n instanceof Array}function h(n){return null==n}function p(n,t){for(var r=n.length-1;r>=0;--r)if(n[r]!==t[r])return!1;return!0}function y(n){this.type_=n,this.props_={},this.key_=null,this.ref_=null,this.hooks_=[],this.parent_=null,this.children_=[],this.path_="",this.posInRow_=null,this.nativeNode_=null,this.ns_=null,this.class_=n===_||n===v?b:f(n)?g:m}var d=function(n){return n.children},v="[",_="=",m=0,g=1,b=2,w=0,A=0;function S(n,t){n.nativeNode_=t,n.ref_ instanceof o&&(n.ref_.current=t)}function k(n){var t=null;return n instanceof y?t=n:a(n)||c(n)?(t=new y("#")).props_.children=n:s(n)&&N(t=new y(v),n),t}function x(n,t,r){t.parent_=n,t.posInRow_=r,n.children_[r]=t}function N(n,t){for(var r,e=-1,o=0,l=t.length;o<l;++o)null!==(r=k(t[o]))&&x(n,r,++e)}var j=["key","ref"];function C(n,t){if(null==n)return{};var r,e,o=function(n,t){if(null==n)return{};var r,e,o={},l=Object.keys(n);for(e=0;e<l.length;e++)r=l[e],t.indexOf(r)>=0||(o[r]=n[r]);return o}(n,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(e=0;e<l.length;e++)r=l[e],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function I(n,t){var r=t||{},e=r.key,o=void 0===e?null:e,l=r.ref,u=void 0===l?null:l,i=C(r,j),a=new y(n);a.props_=i,a.key_=o,a.ref_=u;for(var c=arguments.length,f=new Array(c>2?c-2:0),s=2;s<c;s++)f[s-2]=arguments[s];return a.class_===g?a.props_.children=f.length>1?f:f[0]:N(a,f),a}function O(n,t){n.hook_vnode=t}var E=new Map;function T(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var e,o,l=[],u=!0,i=!1;try{for(r=r.call(n);!(u=(e=r.next()).done)&&(l.push(e.value),!t||l.length!==t);u=!0);}catch(n){i=!0,o=n}finally{try{u||null==r.return||r.return()}finally{if(i)throw o}}return l}}(n,t)||function(n,t){if(n){if("string"==typeof n)return M(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function D(n,t,r){for(var e in r)i(r,e)&&h(t[e])&&U(n,e,r[e]);for(var o in t)i(t,o)&&$(n,o,t[o],r[o])}function U(n,t,r){var e=T(R(t,r),2),o=e[0];h(e[1])||n.removeAttribute(o)}function $(n,t,r,e){var o=T(R(t,r),2),l=o[0],u=o[1];if(!h(u))if("style"!==l){if((a(u)||c(u))&&n.setAttribute(l,u),l in n)try{n[l]=u}catch(n){}}else{if(!h(e)){var f=T(R(t,e),2)[1];if(!h(f))for(var s in f)i(f,s)&&!i(u,s)&&(n.style[s]="")}for(var p in u)i(u,p)&&(h(u[p])||(n.style[p]=u[p]))}}function R(n,t){return f(t)?[n.toLowerCase(),t]:"className"===n?s(t)?["class",t.filter((function(n){return a(n)})).join(" ")]:["class",t]:"class"===n?(console.error("className instead of class"),[n]):"style"!==n||h(t)||function(n){return null!==n&&"object"===u(n)}(t)?[n,t]:(console.error("Style must be an object",t),[n])}function B(n){var t=function(n){return"#"===n.type_?(t=n.props_.children,document.createTextNode(t)):(r=function(n){return 1===n?"http://www.w3.org/2000/svg":null}(n.ns_),e=n.type_,o=n.props_,D(l=null!==r?document.createElementNS(r,e):document.createElement(e),o,{}),l);var t,r,e,o,l}(n);S(n,t),null!==t&&O(t,n)}function L(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function P(n,t){0===n.size?function(n){var t;n.forEach((function(n){null!==(t=z(n))&&(B(n),t.appendChild(n.nativeNode_))}))}(t):(function(n,t){var r,e="";n.forEach((function(n,o){var l,u;t.has(o)?(S(r=t.get(o),n.nativeNode_),"#"===r.type_?r.props_.children!==n.props_.children&&(l=r.nativeNode_,u=r.props_.children,l.textContent=u):D(r.nativeNode_,r.props_,n.props_)):function(n,t){if(n.length<t.length)return!1;for(var r=t.length-1;r>=0;--r)if(t[r]!==n[r])return!1;return!0}(o,e+"/")||(function(n){for(var t,r=F(n),e=0,o=r.length;e<o;++e)null!==(t=r[e]).parentNode&&t.parentNode.removeChild(t)}(n),e=o)}))}(n,t),function(n,t){var r=[];t.forEach((function(t,e){n.has(e)?(V(r,n.get(e)),r.length=0):r.push(t)})),r.length>0&&V(r,null)}(n,t))}function V(n,t){for(var r,e,o=t&&Y(t)||null,l=0,u=n.length;l<u;++l)null!==(e=z(r=n[l]))&&(B(r),null!==o&&e===o.parentNode?e.insertBefore(r.nativeNode_,o):e.appendChild(r.nativeNode_))}function z(n){return n.type_===d?n.nativeNode_:null===n.parent_?null:null===n.parent_.nativeNode_?z(n.parent_):n.parent_.nativeNode_}function Y(n){if(null!==n.nativeNode_)return n.nativeNode_;for(var t=null,r=0,e=n.children_.length;r<e&&null===t;++r)t=Y(n.children_[r]);return t}function F(n){if(null!==n.nativeNode_)return[n.nativeNode_];for(var t=[],r=0,e=n.children_.length;r<e;++r)t.push.apply(t,function(n){if(Array.isArray(n))return L(n)}(o=F(n.children_[r]))||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(o)||function(n,t){if(n){if("string"==typeof n)return L(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(n,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var o;return t}function G(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var e,o,l=[],u=!0,i=!1;try{for(r=r.call(n);!(u=(e=r.next()).done)&&(l.push(e.value),!t||l.length!==t);u=!0);}catch(n){i=!0,o=n}finally{try{u||null==r.return||r.return()}finally{if(i)throw o}}return l}}(n,t)||function(n,t){if(n){if("string"==typeof n)return W(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function q(n,t,r){this.tag_=J,this.callback_=n,this.deps_=t,this.destroy_=null,this.lastDestroy_=r}var H,J=0;function K(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=r(),o=G(e,2),l=o[0],u=o[1];if(l.hooks_.length>u){var i=l.hooks_[u];if((null!==t||null!==i.deps_)&&t.length!==i.deps_.length)throw new Error("Deps must be size-fixed");var a=X(t,i.deps_);if(2===a)return;if(3===a)return void(i.tag_=a);if(1===a||4===a){var c=new q(n,t,i.destroy_);return c.tag_=a,void(l.hooks_[u]=c)}}else{var f=new q(n,t,null);f.tag_=X(t),l.hooks_.push(f)}}function Q(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===n.lastDestroy_||t?null!==n.destroy_&&n.destroy_():n.lastDestroy_()}function X(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null===n?1:0===n.length?2:!1===t||p(n,t)?3:4}function Z(n){var t,r,e=function(n){var t=tn();return rn(n,t),t}(n),o=function(n){var t=tn();return nn(n,t),t}(n);t=e.functional_,r=o.functional_,t.forEach((function(n,t){var e,o=!r.has(t);!function(n,t){for(var r,e=0,o=n.hooks_.length;e<o;++e)(r=n.hooks_[e])instanceof q&&(null!==r.lastDestroy_||null!==r.destroy_)&&(t||1===r.tag_||4===r.tag_)&&Q(r,t)}(n,o),o&&(e=n.path_,E.delete(e))})),P(e.viewable_,o.viewable_),function(n,t){t.forEach((function(t,r){!function(n,t){for(var r,e=0,o=n.hooks_.length;e<o;++e)(r=n.hooks_[e])instanceof q&&(t||1===r.tag_||4===r.tag_)&&((l=r).destroy_=l.callback_(),void 0===l.destroy_&&(l.destroy_=null));var l}(t,!n.has(r))}))}(e.functional_,o.functional_)}function nn(r,e){if(r.class_===g){e.functional_.set(r.path_,r),n=r,t=-1;var o=k(r.type_(r.props_));n=null,t=-1,null!==o&&(x(r,o,0),un(r))}else r.class_===m&&e.viewable_.set(r.path_,r);for(var l=0,u=r.children_.length;l<u;++l)nn(r.children_[l],e)}function tn(){return{functional_:new Map,viewable_:new Map}}function rn(n,t){n.class_===g?t.functional_.set(n.path_,n):n.class_===m&&t.viewable_.set(n.path_,n);for(var r=0,e=n.children_.length;r<e;++r)rn(n.children_[r],t)}function en(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function on(n,t){var r=this;this.context_=n,this.value_=t,this.setValue_=function(n){var t;(t=f(n)?n(r.value_):n)!==r.value_&&(r.value_=t,Z(r.context_))}}function ln(n){var t,e,o,l=(e=r(),o=2,function(n){if(Array.isArray(n))return n}(e)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var e,o,l=[],u=!0,i=!1;try{for(r=r.call(n);!(u=(e=r.next()).done)&&(l.push(e.value),!t||l.length!==t);u=!0);}catch(n){i=!0,o=n}finally{try{u||null==r.return||r.return()}finally{if(i)throw o}}return l}}(e,o)||function(n,t){if(n){if("string"==typeof n)return en(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?en(n,t):void 0}}(e,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],i=l[1];return u.hooks_.length>i?t=u.hooks_[i]:(t=new on(u,n),u.hooks_.push(t)),[t.value_,t.setValue_]}function un(n){for(var t=0,r=n.children_.length;t<r;++t)an(n.children_[t],n.path_)}function an(n,t){var r,e,o;if(n.path_=t+"/"+(null!==n.key_?(r=n.key_,"@"+encodeURIComponent(r)):n.posInRow_)+"/"+(n.class_===g?i(o=n.type_,"hook_alias")?o.hook_alias:o.hook_alias="{"+(++w).toString(36):n.type_),n.class_===g){var l=(e=n.path_,E.get(e)||null);if(null!==l){n.hooks_=l;for(var u,a=0,c=n.hooks_.length;a<c;++a)(u=n.hooks_[a])instanceof on&&(u.context_=n)}!function(n,t){E.set(n,t)}(n.path_,n.hooks_)}n.ns_=function(n){return"svg"===n.type_?1:1===n.parent_.ns_&&"foreignObject"===n.parent_.type_?0:n.parent_.ns_}(n);for(var f=0,s=n.children_.length;f<s;++f)an(n.children_[f],n.path_)}function cn(n,t){return yn(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var e,o,l=[],u=!0,i=!1;try{for(r=r.call(n);!(u=(e=r.next()).done)&&(l.push(e.value),!t||l.length!==t);u=!0);}catch(n){i=!0,o=n}finally{try{u||null==r.return||r.return()}finally{if(i)throw o}}return l}}(n,t)||hn(n,t)||sn()}function fn(n){return yn(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||hn(n)||sn()}function sn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hn(n,t){if(n){if("string"==typeof n)return pn(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pn(n,t):void 0}}function pn(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function yn(n){if(Array.isArray(n))return n}function dn(n){var t=n.text,r=n.setText;return fn(ln(1)),K((function(){return function(){}}),[]),K((function(){return function(){}}),[t]),I("div",{className:"Cat"},I(gn,null,I("span",null,"Ad name: "),I("input",{type:"text",value:t,onInput:function(n){return r(n.target.value)}})))}function vn(n){var t=n.text,r=n.setText,e=cn(ln("gruuu"),2),o=e[0],l=e[1];return K((function(){return function(){}}),[]),K((function(){return function(){}}),[t]),I("div",{className:"Dog"},I(gn,null,I("span",null,"Ad name: "),I("input",{type:"text",value:t,onChange:function(n){return r(n.target.value)}})),I("br",null),I(gn,null,"Speak:"," ",I("input",{value:o,onChange:function(n){return l(n.target.value)}})))}function _n(n){var t=n.layout,r=n.text,e=n.setText;return fn(ln()),K((function(){return function(){}}),[]),I("div",{className:"Bird"},"dog"===t&&I(vn,{text:r,setText:e}),"cat"===t&&I(dn,{text:r,setText:e}))}function mn(n){var t=n.count,r=n.setCount,e=cn(ln("cat"),2),o=e[0],u=e[1],i=cn(ln("unnamed"),2),a=i[0],c=i[1],f=l(null);return K((function(){return function(){}}),[]),K((function(){return function(){}})),K((function(){return function(){}}),[o,a]),I("form",{className:"YourAd",style:{padding:"16px",border:"1px solid #ccc"}},I("div",null,I("span",null,"Your Ad: ",a)),I("br",null),I("div",null,I("select",{ref:f,onChange:function(n){return u(n.target.value)}},I("option",{value:"cat",selected:"cat"===o},"Layout Cat"),I("option",{value:"dog",selected:"dog"===o},"Layout Dog"))),I("br",null),I(gn,null,"cat"===o&&I(gn,{key:"#hehe/hahaha mm"},I("br",null),I("div",null,"This is cat layout."),I(dn,{text:a,setText:c})),"dog"===o&&I(gn,null,I("div",null,"This is not default layout, update from ancestor might reset the state of this part if tree updating logic not correct."),I("br",null),I(vn,{text:a,setText:c}))),I("br",null),I(gn,null,I("div",null,I("strong",null,I("i",null,"This is Bird container"))),I("br",null),I(_n,{layout:o,text:a,setText:c})),I("br",null),I("div",null,I("button",{type:"button",onClick:function(){r((function(n){return n+1}))}},"Update count")," ",I("span",null,"Re-renders:",t)))}function gn(n){return I("div",{className:"Wrapper"},n.children)}function bn(){var n=cn(ln(1),2),t=n[0],r=n[1],e=l(null);return K((function(){return function(){}})),I("article",{className:"MyAd"},[!1,1,2,[4,5]," Count: ",t],I(gn,null,I("inner",null,I("my-div",null,I("love-div",null,I("test-div",null,I("a",null,"link"),I(gn,null,I(gn,null,I(gn,null,"test",I(gn,null,I(mn,{ref:e,count:t,setCount:r}))))))),I("b",null,I("i",null,"hehe"))))))}function wn(){var n=cn(ln(!0),2),t=n[0],r=n[1];return I("=",null,I("paragraph",null,I("input",{type:"checkbox",checked:t,onChange:function(n){return r((function(n){return!n}))}}),I("h2",null,"Demo"),"hello",t&&I(bn,null)))}function An(){return I(wn,null)}console.time("stack"),(H=function(n,t){var r;if(!(r=t.hook_vnode)){for(;t.firstChild;)t.removeChild(t.firstChild);(r=new y(d)).ns_="ownerSVGElement"in t?1:0,S(r,t),O(t,r)}return r.props_.children=n,r}(I((function(){return I("hh-ff",null,I(An,null))}),null),document.getElementById("sandbox-container"))).path_="~"+(++A).toString(36),un(H),Z(H),console.timeEnd("stack")})();