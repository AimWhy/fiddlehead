"use strict";function t(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function n(t){return"string"==typeof t||t instanceof String}function e(t){return"number"==typeof t||t instanceof Number}function o(t){return t instanceof Function}function l(t){return t instanceof Array}function r(t){return null==t}Object.defineProperty(exports,"__esModule",{value:!0});let s=null,u=-1;function i(){if(null===s)throw new Error("Cannot call hooks from outside of the component");return[s,++u]}function c(t){this.current=t}function f(t,n,e,o){this.type=t,this.props=n,this.key=e,this.ref=o,this.hooks=[],this.parent=null,this.children=[],this.path=[],this.posInRow=-1,this.viewNode=null,this.ns=null}function h(t,n){t.viewNode=n,t.ref instanceof c&&(t.ref.current=n)}function a(t){if(t instanceof f)return t;if(n(t)||e(t)){const n=new f("#txt",{},null,null);return n.text=String(t),n}if(l(t)){const n=new f("#arr",{},null,null);for(let e=0;e<t.length;e++){const o=a(t[e]);null!==o&&(o.parent=n,o.posInRow=e,n.children.push(o))}return n}return null}let p=0;function d(t){return t.join("/")}const y=Object.create(null);function w(t,n){y[d(t)]=n}function v(t){delete y[d(t)]}function g(n,e,o){for(let l in o)t(o,l)&&r(e[l])&&k(n,l,o[l]);for(let l in e)t(e,l)&&N(n,l,e[l],o[l])}function k(t,n,e){const[o,l]=m(n,e);r(l)||t.removeAttribute(o)}function N(o,l,s,u){const[i,c]=m(l,s);if(!r(c))if("style"!==i){if((n(c)||e(c))&&o.setAttribute(i,c),i in o)try{o[i]=c}catch(t){}}else{if(!r(u)){const[,n]=m(l,u);if(!r(n))for(let e in n)t(n,e)&&!t(c,e)&&(o.style[e]="")}for(let n in c)t(c,n)&&(r(c[n])||(o.style[n]=c[n]))}}function m(t,e){return o(e)?[t.toLowerCase(),e]:"className"===t?l(e)?["class",e.filter((t=>n(t))).join(" ")]:["class",e]:"class"===t?(console.error("className instead of class"),[t]):"style"!==t||r(e)||function(t){return!!t&&t.constructor===Object}(e)?[t,e]:(console.error("Style must be a plain object",e),[t])}let x=0;let b=0;function C(n){let e=[...n.path];const l=r=>{const s=e.length;var u,i;r!==n&&(null!==r.key?e.push((i=r.key,"@"+encodeURIComponent(i))):e.push(r.posInRow),o(r.type)?e.push((t(u=r.type,"Hook$ComponentType")||(u.Hook$ComponentType=u.name+"$"+ ++b),u.Hook$ComponentType)):e.push(r.type));for(let t=0;t<r.children.length;t++)l(r.children[t]);r.path=[...e],void 0!==r.resolvePath&&(r.resolvePath(),delete r.resolvePath),e.length=s};l(n)}function I(t){"svg"===t.type?t.ns="svg":null!==t.parent?t.ns=t.parent.ns:t.ns="html";let e=null;if("#txt"===t.type)o=t.text,e=document.createTextNode(o);else if("#frg"===t.type||"#arr"===t.type);else if(n(t.type)){let n=null;"svg"===t.ns&&(n="http://www.w3.org/2000/svg"),e=function(t,n,e){const o=null!==t?document.createElementNS(t,n):document.createElement(n);return g(o,e,{}),o}(n,t.type,t.props),function(t,n){t.Hook$VirtualNode=n}(e,t)}var o;h(t,e);for(let n=0;n<t.children.length;n++)I(t.children[n])}function j(n,e){!function(n,e){let o="";for(let l in n)if(t(n,l)&&!t(e,l)&&!l.startsWith(o+"/")){const t=n[l];null!==t.viewNode&&($(t),o=l)}}(n,e),function(n,e){const o=Object.keys({...n,...e});for(let l=0;l<o.length;l++){const r=o[l];if(t(n,r)&&t(e,r)){const t=e[r];if(null!==t.viewNode){const e=n[r];h(t,e.viewNode),"#txt"===t.type?t.text!==e.text&&(t.viewNode.textContent=t.text):g(t.viewNode,t.props,e.props)}}}}(n,e),function(n,e){let o=[];for(let l in e)if(t(e,l))if(t(n,l))R(o,n[l]),o.length=0;else{const t=e[l];null!==t.viewNode&&o.push(t)}o.length>0&&R(o,null)}(n,e)}function R(t,n){const e=n&&H(n)[0]||null;for(let n=0;n<t.length;n++){const o=t[n];if(null!==o.viewNode){const t=E(o);null!==t&&(null!==e&&t===e.parentNode?t.insertBefore(o.viewNode,e):t.appendChild(o.viewNode))}}}function $(t){const n=H(t);for(let t=0;t<n.length;t++){const e=n[t];null!==e.parentNode&&e.parentNode.removeChild(e)}}function E(t){return null===t.parent?null:null===t.parent.viewNode?E(t.parent):t.parent.viewNode}function H(t){return null!==t.viewNode?[t.viewNode]:t.children.reduce(((t,n)=>t.concat(H(n))),[])}function O(t,n,e){this.tag=P,this.callback=t,this.deps=n,this.destroy=null,this.lastDestroy=e}const P=0;function S(t,n){for(let o=0;o<t.hooks.length;o++){const l=t.hooks[o];l instanceof O&&((n||1===l.tag||4===l.tag)&&((e=l).destroy=e.callback()))}var e}function D(t,n){for(let e=0;e<t.hooks.length;e++){const o=t.hooks[e];o instanceof O&&(null!==o.lastDestroy||null!==o.destroy)&&((n||1===o.tag||4===o.tag)&&T(o,n))}}function V(t,n=!1){return null===t?1:0===t.length?2:!1===n||function(t,n){for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}(t,n)?3:4}function T(t,n=!1){null===t.lastDestroy||n?null!==t.destroy&&t.destroy():t.lastDestroy()}function A(n,e){const l=e?{}:_(n);L(n);const r=_(n);!function(n,e){for(let l in n)if(t(n,l)){const r=!t(e,l),s=n[l];o(s.type)&&(D(s,r),r&&v(s.path))}}(l,r),I(n),j(l,r),function(n,e){for(let l in e)if(t(e,l)){const r=!t(n,l),s=e[l];o(s.type)&&S(s,r)}}(l,r)}function L(t){if("#txt"===t.type)return;if(!o(t.type)){for(let n=0;n<t.children.length;n++)L(t.children[n]);return}s=t,u=-1;const n=a(t.type(t.props));s=null,u=-1,null!==n&&(n.parent=t,n.posInRow=0,t.children[0]=n,C(t),L(n))}function _(t){const n=Object.create(null),e=t=>{n[d(t.path)]=t;for(let n=0;n<t.children.length;n++)e(t.children[n])};return e(t),n}function z(t,n,e){this.virtualNode=t,this.value=n,this.setValue=e}function B(t,n,...e){const{key:o=null,ref:l=null,...r}=n,s=new f(t,r,o,l);for(let t=0;t<e.length;t++){const n=a(e[t]);null!==n&&(n.parent=s,n.posInRow=t,s.children.push(n))}return s}exports.h=function(n,e,...l){return e=e||{},null===n?B("#frg",e,...l):o(n)?function(n,e,...o){const{key:l=null,ref:r=null,...s}=e;s.children=o;const u=[--p],i=new f(n,s,l,r);return w(u,i.hooks),i.resolvePath=()=>{v(u);const n=function(n){const e=d(n);return t(y,e)?y[e]:null}(i.path);if(null!==n){i.hooks=n;for(let t=0;t<i.hooks.length;t++){const n=i.hooks[t];n instanceof z&&(n.virtualNode=i)}}w(i.path,i.hooks)},i}(n,e,...l):B(n,e,...l)},exports.mount=function(n,e){if(e.firstChild)throw new Error("Container must be empty");const o=new f(e.nodeName.toLowerCase(),{},null,null);var l;h(o,e),e.ownerSVGElement?o.ns="svg":o.ns="html",n.parent=o,n.posInRow=0,o.children[0]=n,o.path=[(l=e,t(l,"Hook$ContainerId")||(l.Hook$ContainerId="~"+ ++x),l.Hook$ContainerId)],C(o),A(n,!0)},exports.useEffect=function(t,n=null){const[e,o]=i();if(e.hooks.length>o){const l=e.hooks[o];if((null!==n||null!==l.deps)&&n.length!==l.deps.length)throw new Error("Deps must be size-fixed");const r=V(n,l.deps);if(2===r)return;if(3===r)return void(l.tag=r);if(1===r||4===r){const s=new O(t,n,l.destroy);return s.tag=r,void(e.hooks[o]=s)}return}const l=new O(t,n,null);l.tag=V(n),e.hooks.push(l)},exports.useRef=function(t){const[n,e]=i();if(n.hooks.length>e)return n.hooks[e];const o=new c(t);return n.hooks.push(o),o},exports.useState=function(t){const[n,e]=i();if(n.hooks.length>e){const t=n.hooks[e];return[t.value,t.setValue]}const l=new z(n,t,(t=>{let n;n=o(t)?t(l.value):t,n!==l.value&&(l.value=n,A(l.virtualNode,!1))}));return n.hooks.push(l),[l.value,l.setValue]};
